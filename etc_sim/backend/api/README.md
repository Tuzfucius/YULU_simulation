# 后端 API 服务 (Backend API)

本目录定义了系统的 RESTful 接口，主要负责基于 Python 生态的计算密集型任务：图表绘制与规则评估。

## 模块说明

| 模块 | 功能描述 |
|------|---------|
| `charts.py` | 管理图表的生成请求。采用后台子进程模式调用 `plotter.py`，避免阻塞 ASGI 循环。 |
| `simulations.py` | 处理仿真数据的最终保存与元数据记录。 |
| `evaluation.py` | 驱动预警规则引擎，计算 F1 评分及混淆矩阵。 |
| `websocket.py` | 维护与前端的长连接，保障仿真状态的实时同步。 |

## 技术规范
- **异步支持**：基于 FastAPI 的异步架构。
- **性能优化**：针对全量数据分析耗时较长的问题，图表生成接口支持对轨迹数据进行二次降采样。
- **路径处理**：使用 `pathlib` 确保 Windows 系统下的路径兼容性。

## 开发建议
如果要添加新的图表类型，请在 `api/charts.py` 的 `CHART_METADATA` 字典中注册，并确保 `backend/plotter.py` 中有相应的绘制实现。
